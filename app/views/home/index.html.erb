<div class="hero"> 
  <%= image_tag "top_sake.jpg", alt: "日本酒イメージ", class: "hero-img" %>
  <div class="hero-text">
    <h1>ようこそ、SAKE MATCHへ</h1>
  </div>
</div>

<!-- サイト紹介 -->
<div class="site-description text-center">
  <h2 class="catch-copy">もっと自由に、日本酒を楽しもう。</h2>
  <p class="description-text">
    日本酒って、実はもっと自由で楽しい。<br>
    あなたの“好き”から見つかる、とっておきの一杯を。
  </p>
  <%= link_to "診断を始める", new_type_diagnostic_path, class: "btn btn-primary btn-large mt-4" %>
</div>

<!-- タイプ別おすすめ -->
<section class="type-recommended-sake">
  <h2>タイプ別おすすめ</h2>

  <% { "甘口" => @sweet_sakes, "中口" => @medium_sakes, "辛口" => @dry_sakes }.each do |label, sakes| %>
    <h3><%= label %>タイプおすすめ</h3>
    <div class="sake-cards">
      <% if sakes.present? %>
        <% sakes.each do |sake| %>
          <div class="sake-card">
            <% if sake.image_path.present? %>
              <%= image_tag "sakes/#{sake.image_path}", alt: sake.name, class: "sake-image" %>
            <% else %>
              <div class="sake-image-placeholder">画像がありません</div>
            <% end %>

            <h3 class="sake-name"><%= sake.name %></h3>
            <p class="sake-description"><%= truncate(sake.description, length: 50) %></p>

            <div class="sake-rating">
              <% if sake.respond_to?(:average_rating) && sake.average_rating.present? %>
                <%= star_rating(sake.average_rating) %>
                <span class="rating-number">(<%= sake.average_rating %>)</span>
              <% else %>
                <span class="rating-number">(0)</span>
              <% end %>
            </div>

            <%= link_to "レビューを見る", sake_path(sake), class: "btn btn-primary btn-small mt-2" %>
          </div>
        <% end %>
      <% else %>
        <p>まだ登録された日本酒がありません。</p>
      <% end %>
    </div>
  <% end %>
</section>

<!-- 全てのおすすめ日本酒 -->
<section class="recommended-sake">
  <h2>おすすめの日本酒</h2>
  <div class="sake-cards">
    <% if @all_sakes.present? %>
      <% @all_sakes.each do |sake| %>
        <div class="sake-card">
          <% if sake.image_path.present? %>
            <%= image_tag "sakes/#{sake.image_path}", alt: sake.name, class: "sake-image" %>
          <% else %>
            <div class="sake-image-placeholder">画像がありません</div>
          <% end %>
          <h3 class="sake-name"><%= sake.name %></h3>
          <p class="sake-description"><%= truncate(sake.description, length: 50) %></p>
        </div>
      <% end %>
    <% else %>
      <p class="no-sakes">まだ登録された日本酒がありません。</p>
    <% end %>
  </div>

  <div class="more-btn">
    <%= link_to "もっとみる", sakes_path, class: "btn btn-secondary" %>
  </div>
</section>
