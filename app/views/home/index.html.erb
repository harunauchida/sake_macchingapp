<div class="hero">     
  <%= image_tag "top_sake.jpg", alt: "日本酒イメージ", class: "hero-img" %>
  <div class="hero-text">
    <h1>ようこそ、SAKE MATCHへ</h1>
  </div>
</div>

<!-- サイト紹介 -->
<div class="site-description text-center">
  <h2 class="catch-copy">もっと自由に、日本酒を楽しもう。</h2>
  <p class="description-text">
    日本酒って、実はもっと自由で楽しい。<br>
    あなたの“好き”から見つかる、とっておきの一杯を。
  </p>
  <%= link_to "診断を始める", new_type_diagnostic_path, class: "btn btn-primary btn-large mt-4" %>
</div>

<!-- おすすめの日本酒 -->
<section class="recommended-sake">
  <h2>おすすめの日本酒</h2>
  <div class="sake-cards">
    <% if @all_sakes.present? %>
      <% @all_sakes.each do |sake| %>
        <div class="sake-card">
          <!-- 画像表示 or 文字表示 -->
          <% if sake.image_path.present? && asset_exists?("sakes/#{sake.image_path}") %>
            <%= image_tag "sakes/#{sake.image_path}", alt: sake.name, class: "sake-image" %>
          <% else %>
            <div class="sake-image-placeholder">画像がありません</div>
          <% end %>

          <!-- 名前・説明 -->
          <h3 class="sake-name"><%= sake.name %></h3>
          <p class="sake-description"><%= truncate(sake.description, length: 50) %></p>

          <!-- 星評価 -->
          <div class="sake-rating">
            <%= star_rating(sake.average_rating) if sake.respond_to?(:average_rating) %>
            <span class="rating-number">(<%= sake.average_rating || 0 %>)</span>
          </div>

          <!-- タイプ診断マーク -->
          <div class="sake-type-mark">
            <%= case sake.flavor_type
                when "sweet" then "甘口タイプおすすめ 🍯"
                when "medium" then "中口タイプおすすめ 🌾"
                when "dry" then "辛口タイプおすすめ 🔥"
                else "タイプ診断おすすめ 🍶"
                end %>
          </div>

          <!-- レビューリンク -->
          <%= link_to "レビューを見る", sake_path(sake), class: "btn btn-primary btn-small mt-2" %>

          <!-- 気になるボタン -->
          <div class="sake-favorite-button">
            <% if logged_in? && !current_user.guest? %>
              <% if current_user.favorited?(sake) %>
                <%= button_to sake_favorite_path(sake), method: :delete, class: "favorite-btn favorited" do %>
                  ♥
                <% end %>
              <% else %>
                <%= button_to sake_favorite_path(sake), method: :post, class: "favorite-btn" do %>
                  ♥
                <% end %>
              <% end %>
            <% else %>
              <%= button_to "#", class: "favorite-btn disabled", disabled: true, title: "ゲストユーザーは使用できません" do %>
                ♥
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p class="no-sakes">まだ登録された日本酒がありません。</p>
    <% end %>
  </div>

  <div class="more-btn">
    <%= link_to "もっとみる", sakes_path, class: "btn btn-secondary" %>
  </div>
</section>
