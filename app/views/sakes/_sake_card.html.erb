<div class="sake-card">
  <!-- ÁîªÂÉèË°®Á§∫ or ÊñáÂ≠óË°®Á§∫ -->
  <% if sake.image_path.present? %>
    <%= image_tag sake.image_path, alt: sake.name, class: "sake-image" %>
  <% else %>
    <div class="sake-image-placeholder">ÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>
  <% end %>

  <!-- ÂêçÂâç„ÉªË™¨Êòé -->
  <h3 class="sake-name"><%= sake.name %></h3>
  <p class="sake-description"><%= truncate(sake.description, length: 50) %></p>

  <!-- ÊòüË©ï‰æ° -->
  <div class="sake-rating">
    <%= star_rating(sake.average_rating) if sake.respond_to?(:average_rating) %>
    <span class="rating-number">(<%= sake.average_rating || 0 %>)</span>
  </div>

  <!-- „Çø„Ç§„ÉóË®∫Êñ≠„Éû„Éº„ÇØ -->
  <div class="sake-type-mark">
    <%= case sake.flavor_type
        when "sweet" then "ÁîòÂè£„Çø„Ç§„Éó„Åä„Åô„Åô„ÇÅ üçØ"
        when "medium" then "‰∏≠Âè£„Çø„Ç§„Éó„Åä„Åô„Åô„ÇÅ üåæ"
        when "dry" then "ËæõÂè£„Çø„Ç§„Éó„Åä„Åô„Åô„ÇÅ üî•"
        else "„Çø„Ç§„ÉóË®∫Êñ≠„Åä„Åô„Åô„ÇÅ üç∂"
        end %>
  </div>

  <!-- „É¨„Éì„É•„Éº„É™„É≥„ÇØ -->
  <%= link_to "„É¨„Éì„É•„Éº„ÇíË¶ã„Çã", sake_path(sake), class: "btn btn-primary btn-small mt-2" %>

  <!-- Ê∞ó„Å´„Å™„Çã„Éú„Çø„É≥ -->
  <div class="sake-favorite-button">
    <% if logged_in? && !current_user.guest? %>
      <% if current_user.favorited?(sake) %>
        <%= button_to sake_favorite_path(sake),
                      method: :delete,
                      class: "favorite-btn favorited" do %>
          ‚ô•
        <% end %>
      <% else %>
        <%= button_to sake_favorite_path(sake),
                      method: :post,
                      class: "favorite-btn" do %>
          ‚ô•
        <% end %>
      <% end %>
    <% else %>
      <%= button_to "#",
                    class: "favorite-btn disabled",
                    disabled: true,
                    title: "„Ç≤„Çπ„Éà„É¶„Éº„Ç∂„Éº„ÅØ‰ΩøÁî®„Åß„Åç„Åæ„Åõ„Çì" do %>
        ‚ô•
      <% end %>
    <% end %>
  </div>
</div>
