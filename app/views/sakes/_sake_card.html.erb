<div class="sake-card" id="sake_<%= sake.id %>">
  <!-- ÁîªÂÉè -->
  <% if sake.image_path.present? %>
    <%= image_tag asset_path("sakes/#{sake.image_path}"), alt: sake.name, class: "sake-image" %>
  <% else %>
    <div class="sake-image-placeholder">ÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</div>
  <% end %>

  <!-- ÂêçÂâç„ÉªË™¨Êòé -->
  <h3 class="sake-name"><%= sake.name %></h3>
  <p class="sake-description"><%= truncate(sake.description, length: 50) %></p>

  <!-- ÊòüË©ï‰æ° -->
  <div class="sake-rating">
    <% if sake.respond_to?(:average_rating) && sake.average_rating.present? %>
      <%= star_rating(sake.average_rating) %>
      <span class="rating-number">(<%= sake.average_rating %>)</span>
    <% else %>
      <span class="rating-number">(0)</span>
    <% end %>
  </div>

  <!-- „Çø„Ç§„ÉóË®∫Êñ≠„Éû„Éº„ÇØ -->
  <div class="sake-type-mark">
    <%= case sake.flavor_type
        when "sweet" then "ÁîòÂè£„Çø„Ç§„Éó„Åä„Åô„Åô„ÇÅ üçØ"
        when "medium" then "‰∏≠Âè£„Çø„Ç§„Éó„Åä„Åô„Åô„ÇÅ üåæ"
        when "dry" then "ËæõÂè£„Çø„Ç§„Éó„Åä„Åô„Åô„ÇÅ üî•"
        else "„Çø„Ç§„ÉóË®∫Êñ≠„Åä„Åô„Åô„ÇÅ üç∂"
        end %>
  </div>

  <!-- „É¨„Éì„É•„Éº„É™„É≥„ÇØ -->
  <%= link_to "„É¨„Éì„É•„Éº„ÇíË¶ã„Çã", sake_path(sake), class: "btn btn-primary btn-small mt-2" %>

  <!-- Ê∞ó„Å´„Å™„Çã„Éú„Çø„É≥ÔºàTurboÁÑ°ÂäπÂåñÁâàÔºâ -->
  <div class="sake-favorite-button mt-2">
    <% if logged_in? && !current_user.guest? %>
      <% if current_user.favorited?(sake) %>
        <%= button_to "‚ô•",
                      sake_favorite_path(sake),
                      method: :delete,
                      data: { turbo: false },
                      class: "favorite-btn favorited",
                      aria: { label: "#{sake.name} „Çí„ÅäÊ∞ó„Å´ÂÖ•„ÇäËß£Èô§" } %>
      <% else %>
        <%= button_to "‚ô°",
                      sake_favorite_path(sake),
                      method: :post,
                      data: { turbo: false },
                      class: "favorite-btn",
                      aria: { label: "#{sake.name} „Çí„ÅäÊ∞ó„Å´ÂÖ•„ÇäÁôªÈå≤" } %>
      <% end %>
    <% else %>
      <%= button_to "‚ô°",
                    "#",
                    class: "favorite-btn disabled",
                    disabled: true,
                    title: "„Ç≤„Çπ„Éà„É¶„Éº„Ç∂„Éº„ÅØ‰ΩøÁî®„Åß„Åç„Åæ„Åõ„Çì" %>
    <% end %>
  </div>
</div>
