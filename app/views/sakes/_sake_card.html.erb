<div class="sake-card"> 
  <% if sake.image.attached? %>
    <%= image_tag(sake.image, alt: sake.name, class: "sake-image") %>
  <% else %>
    <div class="sake-image-placeholder">No Image</div>
  <% end %>

  <h3><%= sake.name %></h3>
  <p><%= truncate(sake.description, length: 50) %></p>

  <!-- æ˜Ÿè©•ä¾¡ -->
  <div class="sake-rating">
    <%= star_rating(sake.average_rating) %>
    <span class="rating-number">(<%= sake.average_rating %>)</span>
  </div>

  <!-- ã‚¿ã‚¤ãƒ—è¨ºæ–­ãƒžãƒ¼ã‚¯ -->
  <div class="sake-type-mark">
    <%=
      case sake.flavor_type
      when "sweet" then "ç”˜å£ã‚¿ã‚¤ãƒ—ãŠã™ã™ã‚ ðŸ¯"
      when "medium" then "ä¸­å£ã‚¿ã‚¤ãƒ—ãŠã™ã™ã‚ ðŸŒ¾"
      when "dry" then "è¾›å£ã‚¿ã‚¤ãƒ—ãŠã™ã™ã‚ ðŸ”¥"
      else "ã‚¿ã‚¤ãƒ—è¨ºæ–­ãŠã™ã™ã‚ ðŸ¶"
      end
    %>
  </div>

  <!-- ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªãƒ³ã‚¯ -->
  <%= link_to "ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ã‚‹", sake_path(sake), class: "btn btn-primary btn-small mt-2" %>

  <!-- æ°—ã«ãªã‚‹ãƒœã‚¿ãƒ³ -->
  <div class="sake-favorite-button">
    <% if logged_in? && !current_user.guest? %>
      <% if current_user.favorited?(sake) %>
        <%= button_to sake_favorite_path(sake),
                      method: :delete,
                      class: "favorite-btn favorited" do %>
          â™¥
        <% end %>
      <% else %>
        <%= button_to sake_favorite_path(sake),
                      method: :post,
                      class: "favorite-btn" do %>
          â™¥
        <% end %>
      <% end %>
    <% else %>
      <%= button_to "#",
                    class: "favorite-btn disabled",
                    disabled: true,
                    title: "ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“" do %>
        â™¥
      <% end %>
    <% end %>
  </div>
</div>
